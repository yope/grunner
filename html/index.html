<html>
<!-- vim: set tabstop=4:shiftwidth=4 -->
<head>
	<title>G-Runner</title>
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<script src="/js/wscomm.js"></script>
	<script src="/js/ui.js"></script>
<script>
window.onload = function() {
	UIInit();
	WSInit();
};
</script>
<style>
.graphdiv {
	width: 45%;
    padding: 2px;
    border: 2px solid #c0c0ff;
    margin: 2px;
	float: left;
	min-height: 200;
	max-height: 40%;
}

.maindiv {
	position: relative;
	width: 45%;
    padding: 2px;
    border: 2px solid #c0c0ff;
    margin: 2px;
	float: left;
	min-height: 380;
	max-height: 70%;
}

.plot {
	width: 100%;
	height: 85%;
}

#canvas_mov {
	width: 400px;
	height: 380px;
}

#div_statline {
	width: 100%;
	position: absolute;
	bottom: 0px;
}

#table_statline {
	width: 100%;
	table-layout: fixed;
}

#table_statline.tr.td {
	 width="33%";
}

</style>
</head>
<body>
<h1>G-runner</h1>

<div id="tabbar"><div id="tab_main">Status</div></div>

<div id="div_control" class="maindiv">
	<div id="div_mov_title">
		Control
	</div>
	<table style="width:100%">
	<tr>
		<td>File:</td>
		<td colspan="2"><input type="text" id="filename_entry"></td>
		<td><button type="button" class="gcodebtn" onclick="btnStart();">Start</button></td>
		<td><button type="button" onclick="btnPause();" id="pause_button">Pause</button></td>
		<td><button type="button" onclick="btnStop();">Stop</button></td>
	</tr>
	<tr>
		<td colspan="2">Inihibit extruder:</td>
		<td><input type="checkbox" id="extruder_check" onchange="checkExtruder();"/></td>
	</tr>
	<tr>
		<td>GCode:</td>
		<td colspan="2"><input type="text" id="gcode_entry"></td>
		<td><button type="button" class="gcodebtn" onclick="btnGcode();">Execute</button></td>
	</tr>
	<tr>
		<td><button type="button" class="gcodebtn" onclick="btnHome();">Home (G28)</button>
		<td><input type="checkbox" id="homex_check"/>home X</td>
		<td><input type="checkbox" id="homey_check"/>home Y</td>
		<td><input type="checkbox" id="homez_check"/>home Z</td>
	</tr>
	<tr>
		<td>Manual Move:</td>
		<td><button type="button" class="gcodebtn" onclick="btnMove('Z');">Z +</button></td>
		<td><button type="button" class="gcodebtn" onclick="btnMove('Y');">Y +</button></td>
	</tr>
	<tr>
		<td><button type="button" class="gcodebtn" onclick="btnMove('X-');">X -</button></td>
		<td><input type="text" id="distance_entry" size="6" value="5">mm</td>
		<td><button type="button" class="gcodebtn" onclick="btnMove('X');">X +</button></td>
		<td colspan="2">Feedrate: <input type="text" id="feedrate_entry" size="6" value="3000"> mm/min</td>
	</tr>
	<tr>
		<td></td>
		<td><button type="button" class="gcodebtn" onclick="btnMove('Z-');">Z -</button></td>
		<td><button type="button" class="gcodebtn" onclick="btnMove('Y-');">Y -</button></td>
	</tr>
	<tr>
		<td>Speed scale:</td>
		<td colspan="4"><input style="width: 100%;" type="range" min="0" max="12" id="speedscale_slider"
				oninput="sliderSpeed();"/></td>
		<td><input type="text" id="speedscale_entry" value="1.0"></td>
	</tr>
	<tr>
		<td colspan=3>Process heater commands (M-codes):</td>
		<td><input type="checkbox" id="mcodes_check" onchange="checkHeaterPolicy();"/></td>
	</tr>
	<tr>
		<td colspan=3>Disable heaters at end of print:</td>
		<td><input type="checkbox" id="heater_eof_check" onchange="checkHeaterPolicy();"/></td>
	</tr>
	<tr>
		<td colspan=2>Extruder temperature:</td>
		<td><input type="number" id="heater_ext_entry" size="6" value="245" min="20" max="280" onchange="changeHeater();"></td>
		<td><input type="checkbox" id="heater_ext_check" onchange="changeHeater();"/>Enable heater</td>
	</tr>
	<tr>
		<td colspan=2>Bed temperature:</td>
		<td><input type="number" id="heater_bed_entry" size="6" value="100" min="20" max="120" onchange="changeHeater();"></td>
		<td><input type="checkbox" id="heater_bed_check" onchange="changeHeater();"/>Enable heater</td>
	</tr>
	<div id="div_statline">
	Status line
	</div>
	</table>
</div>

<div id="div_mov" class="maindiv">
	<div id="div_mov_graph">
		<canvas id="canvas_mov"></canvas>
	</div>
</div>

<div id="div_t_ext" class="graphdiv">
	<div id="div_t_ext_title">
		Extruder temperature
	</div>
	<div id="div_t_ext_graph">
		<canvas id="canvas_t_ext" class="plot"></canvas>
	</div>
</div>

<div id="div_t_bed" class="graphdiv">
	<div id="div_t_bed_title">
		Print bed temperature
	</div>
	<div id="div_t_bed_graph">
		<canvas id="canvas_t_bed" class="plot"></canvas>
	</div>
</div>

</body>
</html>
